{"remainingRequest":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/src/components/CreatePost.vue?vue&type=style&index=0&id=1947abec&lang=scss&scoped=true&","dependencies":[{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/src/components/CreatePost.vue","mtime":1621264016439},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgdXJsKCdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVBvcHBpbnM6d2dodEAyMDAmZGlzcGxheT1zd2FwJyk7CiNwb3N0Rm9ybXsKICAgIGZvbnQtZmFtaWx5OiBQb3BwaW5zLC1hcHBsZS1zeXN0ZW0sQmxpbmtNYWNTeXN0ZW1Gb250LFNlZ29lIFVJLEhlbHZldGljYSBOZXVlLEFyaWFsLHNhbnMtc2VyaWY7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC13cmFwOiB3cmFwOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7CiAgICBib3JkZXItcmFkaXVzOiAxcmVtOwogICAgbWF4LXdpZHRoOiAxMDAlOwogICAgbWFyZ2luLXRvcDogMXJlbTsKICAgIG1hcmdpbi1yaWdodDogYXV0bzsKICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgYnV0dG9uewogICAgICAgIGJvcmRlci1yYWRpdXM6IDFyZW07CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZTZlNjsKICAgIH0KfQojbXlGb3JtewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtd3JhcDogd3JhcDsKICAgIG1heC13aWR0aDogMTAwJTsKfQpsYWJlbCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KI2NvbW1lbnR7CiAgICBjb2xvcjogYmxhY2s7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnBvc3RJbnB1dHsKICAgIG1hcmdpbjogMXJlbTsKICAgIG1heC1oZWlnaHQ6IGZpdC1jb250ZW50Owp9Ci8vY3NzIHBhcnRpZSBpbnB1dCAKLmxhYmVsRmlsZSB7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBjb2xvcjogIzAwYjFjYTsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwp9Ci5sYWJlbEZpbGU6aG92ZXIgewogICAgY29sb3I6ICMyNWE1YzQ7Cn0KCi8vIGV0IG9uIG1hc3F1ZSBsZSBpbnB1dAouaW5wdXRGaWxlewogICAgZGlzcGxheTogbm9uZTsKfQoK"},{"version":3,"sources":["CreatePost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"CreatePost.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div id=\"postForm\">\n        <form action=\"POST\" @submit.prevent=\"createPost\" id=\"myForm\">\n            <div id=\"comments\" class=\"postInput\">\n                <textarea type=\"text\" id=\"comment\" name=\"comment\" v-model=\"comment\" rows=\"2\" placeholder=\"CrÃ©er un post\"></textarea>\n            </div>\n            <div class=\"postInput\">\n                <label for=\"file\" class=\"labelFile\">Choisir une image</label>\n                <input id=\"file\" class=\"inputFile\" type=\"file\" ref=\"file\" name=\"file\" @change=\"onFileSelected\">\n            </div>\n            <input type=\"submit\" class=\"postInput btn btn-primary\" value=\"Publier!\">\n        </form>\n        \n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"CreatePost\",\n    data() {\n        return{\n            comment: '',\n            file: null\n        }\n    },\n    methods: {\n        onFileSelected(){\n            const file = this.$refs.file.files[0]\n            console.log(file)\n            this.file = file\n            console.log(this.file)\n        },\n        createPost(){\n            console.log('create post running')\n            const token = localStorage.getItem('token');\n            console.log(token)\n            const userId = localStorage.getItem('userId');\n            const formData = new FormData();\n            formData.append('userId', userId);\n            formData.append('comment', this.comment);\n            formData.append('file', this.file);\n            fetch('http://localhost:3000/api/post/createPost', {\n                method: \"POST\",\n                headers: \n                {\n                    authorization: 'Bearer ' + token\n                },\n                body: formData\n            }).then(res => {\n                if(res.status == 200){\n                    this.$emit('postsent', {\n                    message: 'nouveau post',\n                })\n                }\n            }).catch(error => console.log(error));\n            document.getElementById('file').value = null;\n            document.getElementsByName('comment')[0].value = null;\n            formData.delete('file')\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap');\n#postForm{\n    font-family: Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Arial,sans-serif;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    background-color: #ffffff;\n    border-radius: 1rem;\n    max-width: 100%;\n    margin-top: 1rem;\n    margin-right: auto;\n    margin-left: auto;\n    button{\n        border-radius: 1rem;\n        background-color: #f0e6e6;\n    }\n}\n#myForm{\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 100%;\n}\nlabel {\n    display: block;\n    margin-bottom: 10px;\n}\n#comment{\n    color: black;\n    text-align: center;\n}\n.postInput{\n    margin: 1rem;\n    max-height: fit-content;\n}\n//css partie input \n.labelFile {\n    cursor: pointer;\n    color: #00b1ca;\n    font-weight: bold;\n}\n.labelFile:hover {\n    color: #25a5c4;\n}\n\n// et on masque le input\n.inputFile{\n    display: none;\n}\n\n</style>"]}]}