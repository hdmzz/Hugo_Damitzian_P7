{"remainingRequest":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/testtest/Desktop/P7-Groupomania/frontend/src/components/CreatePost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/src/components/CreatePost.vue","mtime":1620038819000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJDcmVhdGVQb3N0IiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBjb21tZW50OiAnJywKICAgICAgICAgICAgZmlsZTogbnVsbAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25GaWxlU2VsZWN0ZWQoKXsKICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuJHJlZnMuZmlsZS5maWxlc1swXQogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKQogICAgICAgICAgICB0aGlzLmZpbGUgPSBmaWxlCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZSkKICAgICAgICB9LAogICAgICAgIGNyZWF0ZVBvc3QoKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZSBwb3N0IHJ1bm5pbmcnKQogICAgICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbikKICAgICAgICAgICAgY29uc3QgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXJJZCcsIHVzZXJJZCk7CiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY29tbWVudCcsIHRoaXMuY29tbWVudCk7CiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuZmlsZSk7CiAgICAgICAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QvY3JlYXRlUG9zdCcsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgaGVhZGVyczogCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdG9rZW4KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YQogICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXMuc3RhdHVzID09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgncG9zdHNlbnQnLCB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ25vdXZlYXUgcG9zdCcsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZScpLnZhbHVlID0gbnVsbDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2NvbW1lbnQnKVswXS52YWx1ZSA9IG51bGw7CiAgICAgICAgICAgIGZvcm1EYXRhLmRlbGV0ZSgnZmlsZScpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["CreatePost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreatePost.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div id=\"postForm\">\n        <form action=\"POST\" @submit.prevent=\"createPost\" id=\"myForm\">\n            <div id=\"comments\" class=\"postInput\">\n                <textarea type=\"text\" id=\"comment\" name=\"comment\" v-model=\"comment\" rows=\"2\" placeholder=\"CrÃ©er un post\"></textarea>\n            </div>\n            <div class=\"postInput\">\n                <label for=\"file\" class=\"labelFile\">Choisir une image</label>\n                <input id=\"file\" class=\"inputFile\" type=\"file\" ref=\"file\" name=\"file\" @change=\"onFileSelected\">\n            </div>\n            <input type=\"submit\" class=\"postInput\" value=\"Publier!\">\n        </form>\n        \n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"CreatePost\",\n    data() {\n        return{\n            comment: '',\n            file: null\n        }\n    },\n    methods: {\n        onFileSelected(){\n            const file = this.$refs.file.files[0]\n            console.log(file)\n            this.file = file\n            console.log(this.file)\n        },\n        createPost(){\n            console.log('create post running')\n            const token = localStorage.getItem('token');\n            console.log(token)\n            const userId = localStorage.getItem('userId');\n            const formData = new FormData();\n            formData.append('userId', userId);\n            formData.append('comment', this.comment);\n            formData.append('file', this.file);\n            fetch('http://localhost:3000/api/post/createPost', {\n                method: \"POST\",\n                headers: \n                {\n                    authorization: 'Bearer ' + token\n                },\n                body: formData\n            }).then(res => {\n                if(res.status == 200){\n                    this.$emit('postsent', {\n                    message: 'nouveau post',\n                })\n                }\n            }).catch(error => console.log(error));\n            document.getElementById('file').value = null;\n            document.getElementsByName('comment')[0].value = null;\n            formData.delete('file')\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap');\n#postForm{\n    font-family: Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Arial,sans-serif;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    background-color: #ffffff;\n    border-radius: 1rem;\n    max-width: 100%;\n    margin-top: 1rem;\n    margin-right: auto;\n    margin-left: auto;\n    button{\n        border-radius: 1rem;\n        background-color: #f0e6e6;\n    }\n}\n#myForm{\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 100%;\n}\nlabel {\n    display: block;\n    margin-bottom: 10px;\n}\n#comment{\n    color: black;\n    text-align: center;\n}\n.postInput{\n    margin: 1rem;\n    max-height: fit-content;\n}\n//css partie input \n.labelFile {\n    cursor: pointer;\n    color: #00b1ca;\n    font-weight: bold;\n}\n.labelFile:hover {\n    color: #25a5c4;\n}\n\n// et on masque le input\n.inputFile{\n    display: none;\n}\n\n</style>"]}]}