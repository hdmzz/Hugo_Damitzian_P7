{"remainingRequest":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/testtest/Desktop/P7-Groupomania/frontend/src/components/Account.vue?vue&type=style&index=0&id=6d0444a6&scoped=true&lang=css&","dependencies":[{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/src/components/Account.vue","mtime":1620038819000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNjb250YWluZXJ7CiAgICB3aWR0aDogNTAlOwogICAgbWFyZ2luLXJpZ2h0OiBhdXRvOwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICBtYXJnaW4tdG9wOiAxNXZoOwogICAgYm94LXNoYWRvdzogMHB4IDBweCAxMHB4IHJnYigxMTAsIDEwNywgMTA3KTsKfQojdGl0bGUsICNpbmZvQ29tcHRlewogICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAxcmVtOwogICAgbWFyZ2luLXRvcDogMXJlbTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGJvcmRlci1yYWRpdXM6IDFyZW07Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMjAwcHgpIGFuZCAobWF4LXdpZHRoOiA5MDBweCkgewogICAgI2NvbnRhaW5lcnsKICAgICAgICB3aWR0aDogOTAlOwogICAgfQp9Cg=="},{"version":3,"sources":["Account.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Account.vue","sourceRoot":"src/components","sourcesContent":["<template>\n        <div id=\"container\">\n            <div id=\"title\">\n                <h1>Information du compte</h1>\n            </div>\n            <div id=\"infoCompte\">\n                <div id=\"nom\">\n                    <p>Nom: {{data.lastName}}</p>\n                </div>\n                <div id=\"prenom\">\n                    <p>Prénom: {{data.firstName}}</p>\n                </div>\n                <div id=\"email\">\n                    <p>Adresse mail : {{data.email}}</p>\n                </div>\n                <div id=\"deleteBtn\">\n                    <button @click=\"deleteUser(data.id)\">Supprimer le compte</button>\n                </div>\n            </div>\n        </div>\n</template>\n<script>\nimport router from '../router';\nexport default {\n    name: 'Account',\n    data(){\n        return{\n            data: []\n        }\n    },\n    created(){\n        this.getAccountInfo();\n    },\n    methods: {\n        getAccountInfo(){\n            const token = localStorage.getItem('token');\n            const userId = localStorage.getItem('userId');\n            console.log(\"getaccount info\");\n            fetch(\"http://localhost:3000/api/account/\" + userId, {\n                headers: \n                {\n                    authorization : 'Bearer ' + token\n                }\n            })\n            .then(res =>{\n                return res.json()\n            }).then(res => this.data = res.result[0])\n        },\n        deleteUser(id){\n            console.log(id);\n            const token = localStorage.getItem('token');\n            console.log(token);\n            fetch(\"http://localhost:3000/api/account/\" + id, {\n                method: 'delete',\n                headers: {\n                    authorization : 'Bearer ' + token\n                }\n            }).then(res => {\n                if(res.status == 200){\n                    //deconnexion , plus de token , plus\n                    localStorage.clear()\n                    alert('Compte supprimé')\n                    router.push('/')\n                }\n            }).then(console.log('res'))\n        }\n    }\n}\n</script>\n<style scoped>\n#container{\n    width: 50%;\n    margin-right: auto;\n    margin-left: auto;\n    margin-top: 15vh;\n    box-shadow: 0px 0px 10px rgb(110, 107, 107);\n}\n#title, #infoCompte{\n    background-color: white;\n    padding: 1rem;\n    margin-top: 1rem;\n    text-align: center;\n    border-radius: 1rem;\n}\n@media screen and (min-width: 200px) and (max-width: 900px) {\n    #container{\n        width: 90%;\n    }\n}\n</style>"]}]}