{"remainingRequest":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/src/components/Account.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/src/components/Account.vue","mtime":1620038819000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0FjY291bnQnLAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgZGF0YTogW10KICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMuZ2V0QWNjb3VudEluZm8oKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0QWNjb3VudEluZm8oKXsKICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgICAgICAgY29uc3QgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiZ2V0YWNjb3VudCBpbmZvIik7CiAgICAgICAgICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FjY291bnQvIiArIHVzZXJJZCwgewogICAgICAgICAgICAgICAgaGVhZGVyczogCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbiA6ICdCZWFyZXIgJyArIHRva2VuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlcyA9PnsKICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuZGF0YSA9IHJlcy5yZXN1bHRbMF0pCiAgICAgICAgfSwKICAgICAgICBkZWxldGVVc2VyKGlkKXsKICAgICAgICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICAgICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbik7CiAgICAgICAgICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2FjY291bnQvIiArIGlkLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdkZWxldGUnLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb24gOiAnQmVhcmVyICcgKyB0b2tlbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXMuc3RhdHVzID09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgLy9kZWNvbm5leGlvbiAsIHBsdXMgZGUgdG9rZW4gLCBwbHVzCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICBhbGVydCgnQ29tcHRlIHN1cHByaW3DqScpCiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goJy8nKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGNvbnNvbGUubG9nKCdyZXMnKSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["Account.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Account.vue","sourceRoot":"src/components","sourcesContent":["<template>\n        <div id=\"container\">\n            <div id=\"title\">\n                <h1>Information du compte</h1>\n            </div>\n            <div id=\"infoCompte\">\n                <div id=\"nom\">\n                    <p>Nom: {{data.lastName}}</p>\n                </div>\n                <div id=\"prenom\">\n                    <p>Prénom: {{data.firstName}}</p>\n                </div>\n                <div id=\"email\">\n                    <p>Adresse mail : {{data.email}}</p>\n                </div>\n                <div id=\"deleteBtn\">\n                    <button @click=\"deleteUser(data.id)\">Supprimer le compte</button>\n                </div>\n            </div>\n        </div>\n</template>\n<script>\nimport router from '../router';\nexport default {\n    name: 'Account',\n    data(){\n        return{\n            data: []\n        }\n    },\n    created(){\n        this.getAccountInfo();\n    },\n    methods: {\n        getAccountInfo(){\n            const token = localStorage.getItem('token');\n            const userId = localStorage.getItem('userId');\n            console.log(\"getaccount info\");\n            fetch(\"http://localhost:3000/api/account/\" + userId, {\n                headers: \n                {\n                    authorization : 'Bearer ' + token\n                }\n            })\n            .then(res =>{\n                return res.json()\n            }).then(res => this.data = res.result[0])\n        },\n        deleteUser(id){\n            console.log(id);\n            const token = localStorage.getItem('token');\n            console.log(token);\n            fetch(\"http://localhost:3000/api/account/\" + id, {\n                method: 'delete',\n                headers: {\n                    authorization : 'Bearer ' + token\n                }\n            }).then(res => {\n                if(res.status == 200){\n                    //deconnexion , plus de token , plus\n                    localStorage.clear()\n                    alert('Compte supprimé')\n                    router.push('/')\n                }\n            }).then(console.log('res'))\n        }\n    }\n}\n</script>\n<style scoped>\n#container{\n    width: 50%;\n    margin-right: auto;\n    margin-left: auto;\n    margin-top: 15vh;\n    box-shadow: 0px 0px 10px rgb(110, 107, 107);\n}\n#title, #infoCompte{\n    background-color: white;\n    padding: 1rem;\n    margin-top: 1rem;\n    text-align: center;\n    border-radius: 1rem;\n}\n@media screen and (min-width: 200px) and (max-width: 900px) {\n    #container{\n        width: 90%;\n    }\n}\n</style>"]}]}