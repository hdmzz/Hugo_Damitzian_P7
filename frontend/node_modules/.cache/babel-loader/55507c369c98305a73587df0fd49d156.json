{"remainingRequest":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js!/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/src/components/Account.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/src/components/Account.vue","mtime":1620038819000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/a trier/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBY2NvdW50JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRBY2NvdW50SW5mbygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QWNjb3VudEluZm86IGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgIHZhciB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CiAgICAgIGNvbnNvbGUubG9nKCJnZXRhY2NvdW50IGluZm8iKTsKICAgICAgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWNjb3VudC8iICsgdXNlcklkLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgYXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdG9rZW4KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJldHVybiByZXMuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gX3RoaXMuZGF0YSA9IHJlcy5yZXN1bHRbMF07CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uIGRlbGV0ZVVzZXIoaWQpIHsKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgY29uc29sZS5sb2codG9rZW4pOwogICAgICBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hY2NvdW50LyIgKyBpZCwgewogICAgICAgIG1ldGhvZDogJ2RlbGV0ZScsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgYXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdG9rZW4KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgLy9kZWNvbm5leGlvbiAsIHBsdXMgZGUgdG9rZW4gLCBwbHVzCiAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgIGFsZXJ0KCdDb21wdGUgc3VwcHJpbcOpJyk7CiAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgIH0KICAgICAgfSkudGhlbihjb25zb2xlLmxvZygncmVzJykpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Account.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,MAAA,MAAA,WAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,OAPA,qBAOA;AACA,SAAA,cAAA;AACA,GATA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AACA,UAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,UAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,iBAAA;AACA,MAAA,KAAA,CAAA,uCAAA,MAAA,EAAA;AACA,QAAA,OAAA,EACA;AACA,UAAA,aAAA,EAAA,YAAA;AADA;AAFA,OAAA,CAAA,CAMA,IANA,CAMA,UAAA,GAAA,EAAA;AACA,eAAA,GAAA,CAAA,IAAA,EAAA;AACA,OARA,EAQA,IARA,CAQA,UAAA,GAAA;AAAA,eAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,MAAA,CAAA,CAAA,CAAA;AAAA,OARA;AASA,KAdA;AAeA,IAAA,UAfA,sBAeA,EAfA,EAeA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,MAAA,KAAA,CAAA,uCAAA,EAAA,EAAA;AACA,QAAA,MAAA,EAAA,QADA;AAEA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,EAAA,YAAA;AADA;AAFA,OAAA,CAAA,CAKA,IALA,CAKA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA;AACA,UAAA,YAAA,CAAA,KAAA;AACA,UAAA,KAAA,CAAA,iBAAA,CAAA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,OAZA,EAYA,IAZA,CAYA,OAAA,CAAA,GAAA,CAAA,KAAA,CAZA;AAaA;AAhCA;AAVA,CAAA","sourcesContent":["<template>\n        <div id=\"container\">\n            <div id=\"title\">\n                <h1>Information du compte</h1>\n            </div>\n            <div id=\"infoCompte\">\n                <div id=\"nom\">\n                    <p>Nom: {{data.lastName}}</p>\n                </div>\n                <div id=\"prenom\">\n                    <p>Prénom: {{data.firstName}}</p>\n                </div>\n                <div id=\"email\">\n                    <p>Adresse mail : {{data.email}}</p>\n                </div>\n                <div id=\"deleteBtn\">\n                    <button @click=\"deleteUser(data.id)\">Supprimer le compte</button>\n                </div>\n            </div>\n        </div>\n</template>\n<script>\nimport router from '../router';\nexport default {\n    name: 'Account',\n    data(){\n        return{\n            data: []\n        }\n    },\n    created(){\n        this.getAccountInfo();\n    },\n    methods: {\n        getAccountInfo(){\n            const token = localStorage.getItem('token');\n            const userId = localStorage.getItem('userId');\n            console.log(\"getaccount info\");\n            fetch(\"http://localhost:3000/api/account/\" + userId, {\n                headers: \n                {\n                    authorization : 'Bearer ' + token\n                }\n            })\n            .then(res =>{\n                return res.json()\n            }).then(res => this.data = res.result[0])\n        },\n        deleteUser(id){\n            console.log(id);\n            const token = localStorage.getItem('token');\n            console.log(token);\n            fetch(\"http://localhost:3000/api/account/\" + id, {\n                method: 'delete',\n                headers: {\n                    authorization : 'Bearer ' + token\n                }\n            }).then(res => {\n                if(res.status == 200){\n                    //deconnexion , plus de token , plus\n                    localStorage.clear()\n                    alert('Compte supprimé')\n                    router.push('/')\n                }\n            }).then(console.log('res'))\n        }\n    }\n}\n</script>\n<style scoped>\n#container{\n    width: 50%;\n    margin-right: auto;\n    margin-left: auto;\n    margin-top: 15vh;\n    box-shadow: 0px 0px 10px rgb(110, 107, 107);\n}\n#title, #infoCompte{\n    background-color: white;\n    padding: 1rem;\n    margin-top: 1rem;\n    text-align: center;\n    border-radius: 1rem;\n}\n@media screen and (min-width: 200px) and (max-width: 900px) {\n    #container{\n        width: 90%;\n    }\n}\n</style>"],"sourceRoot":"src/components"}]}