{"remainingRequest":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js!/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/testtest/Desktop/P7-Groupomania/frontend/src/router/index.js","dependencies":[{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/src/router/index.js","mtime":1620038819000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZS5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKVnVlLnVzZShWdWVSb3V0ZXIpOwppbXBvcnQgaW5zY3JpcHRpb24gZnJvbSAnLi4vdmlld3MvU2lnblVwJzsKaW1wb3J0IGNvbm5lY3Rpb25WdWUgZnJvbSAnLi4vdmlld3MvQ29ubmV4aW9uJzsKaW1wb3J0IFBvc3RzVnVlIGZyb20gJy4uL3ZpZXdzL1Bvc3RzJzsKaW1wb3J0IHRlc3QgZnJvbSAnLi4vdmlld3MvdGVzdCc7CmltcG9ydCBDcmVhdGVQb3N0VnVlIGZyb20gJy4uL3ZpZXdzL0NyZWF0ZVBvc3QnOwppbXBvcnQgQWNjb3VudFZ1ZSBmcm9tICcuLi92aWV3cy9BY2NvdW50JzsKaW1wb3J0IFBvc3RWdWUgZnJvbSAnLi4vdmlld3MvUG9zdCc7CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGlzdG9yeScsCiAgcm91dGVzOiBbewogICAgcGF0aDogJy8nLAogICAgbmFtZTogJ2luc2NyaXB0aW9uJywKICAgIGNvbXBvbmVudDogaW5zY3JpcHRpb24sCiAgICBtZXRhOiB7CiAgICAgIGd1ZXN0OiB0cnVlCiAgICB9CiAgfSwgewogICAgcGF0aDogJy9wb3N0cycsCiAgICBuYW1lOiAncG9zdHMnLAogICAgY29tcG9uZW50OiBQb3N0c1Z1ZSwKICAgIG1ldGE6IHsKICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgICB9CiAgfSwgewogICAgcGF0aDogJy9jb25uZXhpb24nLAogICAgbmFtZTogJ2Nvbm5leGlvbicsCiAgICBjb21wb25lbnQ6IGNvbm5lY3Rpb25WdWUsCiAgICBtZXRhOiB7CiAgICAgIGd1ZXN0OiB0cnVlCiAgICB9CiAgfSwgewogICAgcGF0aDogJy90ZXN0JywKICAgIG5hbWU6ICd0ZXN0JywKICAgIGNvbXBvbmVudDogdGVzdCwKICAgIG1ldGE6IHsKICAgICAgZ3Vlc3Q6IHRydWUKICAgIH0KICB9LCB7CiAgICBwYXRoOiAnL2NyZWF0ZVBvc3QnLAogICAgbmFtZTogJ2NyZWF0ZVBvc3QnLAogICAgY29tcG9uZW50OiBDcmVhdGVQb3N0VnVlLAogICAgbWV0YTogewogICAgICByZXF1aXJlc0F1dGg6IHRydWUKICAgIH0KICB9LCB7CiAgICBwYXRoOiAnL2FjY291bnQnLAogICAgbmFtZTogJ2FjY291bnQnLAogICAgY29tcG9uZW50OiBBY2NvdW50VnVlLAogICAgbWV0YTogewogICAgICByZXF1aXJlc0F1dGg6IHRydWUKICAgIH0KICB9LCB7CiAgICBwYXRoOiAnL3Bvc3QvOmlkJywKICAgIG5hbWU6ICdwb3N0JywKICAgIGNvbXBvbmVudDogUG9zdFZ1ZSwKICAgIHByb3BzOiB0cnVlLAogICAgbWV0YTogewogICAgICByZXF1aXJlc0F1dGg6IHRydWUKICAgIH0KICB9XQp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICByZXR1cm4gcmVjb3JkLm1ldGEucmVxdWlyZXNBdXRoOwogIH0pKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgPT0gbnVsbCkgewogICAgICBuZXh0KHsKICAgICAgICBwYXRoOiAnL2Nvbm5leGlvbicsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBuZXh0VXJsOiB0by5mdWxsUGF0aAogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpKTsKCiAgICAgIGlmICh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgIHJldHVybiByZWNvcmQubWV0YS5pc19hZG1pbjsKICAgICAgfSkpIHsKICAgICAgICBpZiAodXNlci5pc19hZG1pbiA9PSAxKSB7CiAgICAgICAgICBuZXh0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5leHQoewogICAgICAgICAgICBuYW1lOiAnY29ubmV4aW9uJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfQogIH0gZWxzZSBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5ndWVzdDsKICB9KSkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpID09IG51bGwpIHsKICAgICAgbmV4dCgpOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["/Users/testtest/Desktop/P7-Groupomania/frontend/src/router/index.js"],"names":["Vue","VueRouter","use","inscription","connectionVue","PostsVue","test","CreatePostVue","AccountVue","PostVue","router","mode","routes","path","name","component","meta","guest","requiresAuth","props","beforeEach","to","from","next","matched","some","record","localStorage","getItem","params","nextUrl","fullPath","user","JSON","parse","is_admin"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\nimport inscription from '../views/SignUp';\nimport connectionVue from '../views/Connexion';\nimport PostsVue from '../views/Posts';\nimport test from '../views/test';\nimport CreatePostVue from '../views/CreatePost';\nimport AccountVue from '../views/Account';\nimport PostVue from '../views/Post';\n\nconst router = new VueRouter({\n  mode: 'history',\n  routes:[\n    {\n      path: '/',\n      name: 'inscription',\n      component: inscription,\n      meta: {\n        guest: true\n      }\n    },\n    {\n      path: '/posts',\n      name: 'posts',\n      component: PostsVue,\n      meta: {\n        requiresAuth: true\n      }\n    }, \n    {\n      path: '/connexion',\n      name: 'connexion',\n      component: connectionVue,\n      meta: {\n        guest: true\n      }\n    },\n    {\n      path: '/test',\n      name: 'test',\n      component: test,\n      meta: {\n        guest: true\n      }\n    },\n    {\n      path: '/createPost',\n      name: 'createPost',\n      component: CreatePostVue,\n      meta: {\n        requiresAuth: true\n      }\n    },\n    {\n      path: '/account',\n      name: 'account',\n      component: AccountVue,\n      meta: {\n        requiresAuth: true\n      }\n    },\n    {\n      path: '/post/:id',\n      name: 'post',\n      component: PostVue,\n      props: true,\n      meta: {\n        requiresAuth: true\n      }\n    }\n  ]\n});\n\n\nrouter.beforeEach((to, from, next) => {\n  if(to.matched.some(record => record.meta.requiresAuth)) {\n      if (localStorage.getItem('token') == null) {\n          next({\n              path: '/connexion',\n              params: { nextUrl: to.fullPath }\n          })\n      } else {\n          let user = JSON.parse(localStorage.getItem('userId'))\n          if(to.matched.some(record => record.meta.is_admin)) {\n              if(user.is_admin == 1){\n                  next()\n              }\n              else{\n                  next({ name: 'connexion'})\n              }\n          }else {\n              next()\n          }\n      }\n  } else if(to.matched.some(record => record.meta.guest)) {\n      if(localStorage.getItem('token') == null){\n          next()\n        } else {\n      next()\n  }\n}})\n\n\nexport default router\n"]}]}