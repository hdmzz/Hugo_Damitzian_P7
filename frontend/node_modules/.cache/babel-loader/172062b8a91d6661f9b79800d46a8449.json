{"remainingRequest":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js!/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/testtest/Desktop/P7-Groupomania/frontend/src/components/CreatePost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/src/components/CreatePost.vue","mtime":1620038819000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/testtest/Desktop/P7-Groupomania/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3JlYXRlUG9zdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbW1lbnQ6ICcnLAogICAgICBmaWxlOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25GaWxlU2VsZWN0ZWQ6IGZ1bmN0aW9uIG9uRmlsZVNlbGVjdGVkKCkgewogICAgICB2YXIgZmlsZSA9IHRoaXMuJHJlZnMuZmlsZS5maWxlc1swXTsKICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICAgIHRoaXMuZmlsZSA9IGZpbGU7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZSk7CiAgICB9LAogICAgY3JlYXRlUG9zdDogZnVuY3Rpb24gY3JlYXRlUG9zdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUgcG9zdCBydW5uaW5nJyk7CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICBjb25zb2xlLmxvZyh0b2tlbik7CiAgICAgIHZhciB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJyk7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXJJZCcsIHVzZXJJZCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY29tbWVudCcsIHRoaXMuY29tbWVudCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuZmlsZSk7CiAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QvY3JlYXRlUG9zdCcsIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBhdXRob3JpemF0aW9uOiAnQmVhcmVyICcgKyB0b2tlbgogICAgICAgIH0sCiAgICAgICAgYm9keTogZm9ybURhdGEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy4kZW1pdCgncG9zdHNlbnQnLCB7CiAgICAgICAgICAgIG1lc3NhZ2U6ICdub3V2ZWF1IHBvc3QnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZScpLnZhbHVlID0gbnVsbDsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2NvbW1lbnQnKVswXS52YWx1ZSA9IG51bGw7CiAgICAgIGZvcm1EYXRhWyJkZWxldGUiXSgnZmlsZScpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["CreatePost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,UAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;AACA,KANA;AAOA,IAAA,UAPA,wBAOA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,qBAAA;AACA,UAAA,KAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,UAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,MAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA,OAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,IAAA;AACA,MAAA,KAAA,CAAA,2CAAA,EAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,OAAA,EACA;AACA,UAAA,aAAA,EAAA,YAAA;AADA,SAHA;AAMA,QAAA,IAAA,EAAA;AANA,OAAA,CAAA,CAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,UAAA,EAAA;AACA,YAAA,OAAA,EAAA;AADA,WAAA;AAGA;AACA,OAbA,WAaA,UAAA,KAAA;AAAA,eAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA;AAAA,OAbA;AAcA,MAAA,QAAA,CAAA,cAAA,CAAA,MAAA,EAAA,KAAA,GAAA,IAAA;AACA,MAAA,QAAA,CAAA,iBAAA,CAAA,SAAA,EAAA,CAAA,EAAA,KAAA,GAAA,IAAA;AACA,MAAA,QAAA,UAAA,CAAA,MAAA;AACA;AAjCA;AARA,CAAA","sourcesContent":["<template>\n    <div id=\"postForm\">\n        <form action=\"POST\" @submit.prevent=\"createPost\" id=\"myForm\">\n            <div id=\"comments\" class=\"postInput\">\n                <textarea type=\"text\" id=\"comment\" name=\"comment\" v-model=\"comment\" rows=\"2\" placeholder=\"CrÃ©er un post\"></textarea>\n            </div>\n            <div class=\"postInput\">\n                <label for=\"file\" class=\"labelFile\">Choisir une image</label>\n                <input id=\"file\" class=\"inputFile\" type=\"file\" ref=\"file\" name=\"file\" @change=\"onFileSelected\">\n            </div>\n            <input type=\"submit\" class=\"postInput\" value=\"Publier!\">\n        </form>\n        \n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"CreatePost\",\n    data() {\n        return{\n            comment: '',\n            file: null\n        }\n    },\n    methods: {\n        onFileSelected(){\n            const file = this.$refs.file.files[0]\n            console.log(file)\n            this.file = file\n            console.log(this.file)\n        },\n        createPost(){\n            console.log('create post running')\n            const token = localStorage.getItem('token');\n            console.log(token)\n            const userId = localStorage.getItem('userId');\n            const formData = new FormData();\n            formData.append('userId', userId);\n            formData.append('comment', this.comment);\n            formData.append('file', this.file);\n            fetch('http://localhost:3000/api/post/createPost', {\n                method: \"POST\",\n                headers: \n                {\n                    authorization: 'Bearer ' + token\n                },\n                body: formData\n            }).then(res => {\n                if(res.status == 200){\n                    this.$emit('postsent', {\n                    message: 'nouveau post',\n                })\n                }\n            }).catch(error => console.log(error));\n            document.getElementById('file').value = null;\n            document.getElementsByName('comment')[0].value = null;\n            formData.delete('file')\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap');\n#postForm{\n    font-family: Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Arial,sans-serif;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    background-color: #ffffff;\n    border-radius: 1rem;\n    max-width: 100%;\n    margin-top: 1rem;\n    margin-right: auto;\n    margin-left: auto;\n    button{\n        border-radius: 1rem;\n        background-color: #f0e6e6;\n    }\n}\n#myForm{\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 100%;\n}\nlabel {\n    display: block;\n    margin-bottom: 10px;\n}\n#comment{\n    color: black;\n    text-align: center;\n}\n.postInput{\n    margin: 1rem;\n    max-height: fit-content;\n}\n//css partie input \n.labelFile {\n    cursor: pointer;\n    color: #00b1ca;\n    font-weight: bold;\n}\n.labelFile:hover {\n    color: #25a5c4;\n}\n\n// et on masque le input\n.inputFile{\n    display: none;\n}\n\n</style>"],"sourceRoot":"src/components"}]}